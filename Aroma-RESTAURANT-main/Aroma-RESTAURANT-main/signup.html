<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sign Up | Aroma Kitchen</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body{font-family:Poppins,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;background:#f8f8f8;}
    form{background:white;padding:30px;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,0.2);}
    input{display:block;width:250px;margin:10px 0;padding:10px;border:1px solid #ccc;border-radius:5px;}
    button{background:teal;color:white;border:none;padding:10px 15px;border-radius:5px;cursor:pointer;}
    a{color:teal;text-decoration:none;}
  </style>
</head>
<body>
  <form id="signupForm">
    <h2>Create an Account</h2>
    <input type="text" id="signupName" placeholder="Full Name" required>
    <input type="email" id="signupEmail" placeholder="Email" required>
    <input type="password" id="signupPassword" placeholder="Password" required>
    <input type="password" id="confirmPassword" placeholder="Confirm Password" required>
    <button type="submit">Sign Up</button>

    <div id="g_id_onload"
         data-client_id="YOUR_GOOGLE_CLIENT_ID"
         data-context="signup"
         data-ux_mode="popup"
         data-callback="handleGoogleSignIn"
         data-auto_select="false">
    </div>

    <div class="g_id_signin"
         data-type="standard"
         data-shape="rectangular"
         data-theme="outline"
         data-text="signup_with"
         data-size="large"
         data-logo_alignment="left">
    </div>

    <p>Already have an account? <a href="signin.html">Log In</a></p>
  </form>

  <script>
    function hash(str){let h=0;for(let i=0;i<str.length;i++)h=(Math.imul(31,h)+str.charCodeAt(i))|0;return"h_"+Math.abs(h);}
    function getUsers(){return JSON.parse(localStorage.getItem("aroma_users"))||[];}
    function saveUser(user){const users=getUsers();users.push(user);localStorage.setItem("aroma_users",JSON.stringify(users));}

    document.getElementById("signupForm").addEventListener("submit",e=>{
      e.preventDefault();
      const name=document.getElementById("signupName").value.trim();
      const email=document.getElementById("signupEmail").value.trim().toLowerCase();
      const pw=document.getElementById("signupPassword").value;
      const cw=document.getElementById("confirmPassword").value;

      if(pw!==cw){alert("Passwords do not match!");return;}

      const users=getUsers();
      if(users.some(u=>u.email===email)){
        alert("Email already exists. Please log in instead.");
        return;
      }

      const user={id:Date.now(),name,email,passwordHash:hash(pw)};
      saveUser(user);
      localStorage.setItem("aroma_auth",JSON.stringify({name,email}));
      alert("Account created successfully!");
      window.location.href="index.html";
    });

    // Google Sign-Up
    function handleGoogleSignIn(response){
      const data=jwt_decode(response.credential);
      const user={name:data.name,email:data.email};
      localStorage.setItem("aroma_auth",JSON.stringify(user));
      alert("Signed up successfully with Google!");
      window.location.href="index.html";
    }
  </script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
<script src="script.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/jwt-decode/build/jwt-decode.min.js"></script>
</body>
</html>
