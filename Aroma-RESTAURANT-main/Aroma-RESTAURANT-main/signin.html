<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sign In | Aroma Kitchen</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body{font-family:Poppins,sans-serif;display:flex;justify-content:center;align-items:center;height:100vh;background:#f8f8f8;}
    form{background:white;padding:30px;border-radius:10px;box-shadow:0 2px 5px rgba(0,0,0,0.2);}
    input{display:block;width:250px;margin:10px 0;padding:10px;border:1px solid #ccc;border-radius:5px;}
    button{background:teal;color:white;border:none;padding:10px 15px;border-radius:5px;cursor:pointer;}
    a{color:teal;text-decoration:none;}
    .forgot-link a{
      display: flex;
      justify-content:flex-end;
      text-align:center;
      padding: 0px;
    }

    
  </style>
</head>
<body>
  <form id="signinForm">
    <h2>Welcome Back!</h2>
    <input type="email" id="signinEmail" placeholder="Email" required>
    <input type="password" id="signinPassword" placeholder="Password" required>
    <button type="submit">Sign In</button>
    <p><a href="forgot.html" class="forgot-link">Forgot Password?</a></p>


    <div id="g_id_onload"
         data-client_id="YOUR_GOOGLE_CLIENT_ID"
         data-context="signin"
         data-ux_mode="popup"
         data-callback="handleGoogleLogin">
    </div>

    <div class="g_id_signin"
         data-type="standard"
         data-shape="rectangular"
         data-theme="outline"
         data-text="signin_with"
         data-size="large"
         data-logo_alignment="left">
    </div>

    <p>Don't have an account? <a href="signup.html">Sign Up</a></p>
  </form>

  <script>
    function hash(str){let h=0;for(let i=0;i<str.length;i++)h=(Math.imul(31,h)+str.charCodeAt(i))|0;return"h_"+Math.abs(h);}
    function getUsers(){return JSON.parse(localStorage.getItem("aroma_users"))||[];}

    document.getElementById("signinForm").addEventListener("submit",e=>{
      e.preventDefault();
      const email=document.getElementById("signinEmail").value.trim().toLowerCase();
      const pw=document.getElementById("signinPassword").value;
      const users=getUsers();
      const user=users.find(u=>u.email===email && u.passwordHash===hash(pw));
      if(!user){alert("Invalid credentials!");return;}
      localStorage.setItem("aroma_auth",JSON.stringify({name:user.name,email:user.email}));
      alert("Login successful!");
      window.location.href="index.html";
    });

    function handleGoogleLogin(response){
      const data=jwt_decode(response.credential);
      const user={name:data.name,email:data.email};
      localStorage.setItem("aroma_auth",JSON.stringify(user));
      alert("Signed in successfully with Google!");
      window.location.href="index.html";
    }
  </script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>
<script src="script.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/jwt-decode/build/jwt-decode.min.js"></script>

  
</body>
</html>
